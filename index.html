<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF<li>8">
    </li>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>check</title>

    <script>
        let relationships = {
             "0": { "child": 1, "sibling": 3 },
             "1": { "child": null, "sibling": 2 },
             "2": { "child": null, "sibling": null },
             "3": { "child": 4, "sibling": 16 },
             "4": { "child": 5, "sibling": 17 },
             "5": { "child": 6, "sibling": 7 },
             "6": { "child": null, "sibling": 8 },
             "7": { "child": null, "sibling": null },
             "8": { "child": 9, "sibling": null },
             "9": { "child": null, "sibling": null },
             "10": { "child": null, "sibling": null },
             "11": { "child": null, "sibling": null },
             "12": { "child": 13, "sibling": 14 },
             "13": { "child": null, "sibling": 15 },
             "14": { "child": null, "sibling": null },
             "15": { "child": null, "sibling": null },
             "16": { "child": null, "sibling": null },
             "17": { "child": 18, "sibling": 20 },
             "18": { "child": null, "sibling": 19 },
             "19": { "child": null, "sibling": null },
             "20": { "child": 21, "sibling": null },
             "21": { "child": null, "sibling": 22 },
             "22": { "child": null, "sibling": null },
        };

        let nodes = {
            "0" : { "id": "0", "title": "Music" },
            "1" : { "id": "1", "title": "Offended" },
            "2" : { "id": "2", "title": "Krystal" },
            "3" : { "id": "3", "title": "Code" },
            "4" : { "id": "4", "title": "Check" },
            "5" : { "id": "5", "title": "Set up the data" },
            "6" : { "id": "6", "title": "Scaffold in markdown" },
            "7" : { "id": "7", "title": "Mock this in JSON" },
            "8" : { "id": "8", "title": "Given json data (entities + relationships) render the page" },
            "9" : { "id": "9", "title": "Render the node " },
            "10" : { "id": "10", "title": "render its child" },
            "11" : { "id": "11", "title": "render its sibling" },
            "12" : { "id": "12", "title": "Structure the page" },
            "13" : { "id": "13", "title": "Scaffold out html" },
            "14" : { "id": "14", "title": "Implement the logic" },
            "15" : { "id": "15", "title": "Recording/Editing process" },
            "16" : { "id": "16", "title": "Personal Site" },
            "17" : { "id": "17", "title": "Activities" },
            "18" : { "id": "18", "title": "Go to cafe" },
            "19" : { "id": "19", "title": "Go for a walk" },
            "20" : { "id": "20", "title": "Admin" },
            "21" : { "id": "21", "title": "Contact local ISKF chapter to meet and see if I can train/instruct" },
            "22" : { "id": "22", "title": "Set up a free trial at one competitive" }
        };
   
        let rootList = document.createElement('ol');

        function render(root, node) {
            //========= BUILD CHECKLIST ITEM ==============

            //------------ build title node ---------------
            let li = document.createElement('li');
            li.id = node.id;
            li.textContent = node.title + ' ';
            //---------------------------------------------

            //-------- build add sibling button -----------
            let addButton = document.createElement('button');
            addButton.textContent = 'Add Sibling Item';
            li.appendChild(addButton);
            
            
            // data add:
                // 0. newNode.sibling = targetNode.sibling
                // 1. targetNode.sibling = newNode.id
            // html add:
                // on click, render a text input to get a new title
                 // onsubmit to use the input (title) to build a new checklist node
  
                // generate an li with the given title
                // targetNode.nextSibling.insertBefore(newNode)
            //---------------------------------------------
            
            //------------ build update feature -----------

            //---------------------------------------------
            
            //------------ build delete button ------------
            let deleteButton = document.createElement('button');
            deleteButton.textContent = 'Delete Item';
            li.appendChild(deleteButton);

            //data delete:
                //1. node.prevSibling.nextSibling = node.nextSibling
            //html delete:
                //2. node.htmlElement.remove()
            //---------------------------------------------

            //=========== END CHECKLIST ITEM ==============
            
            // render node as checkListItem under root
            root.appendChild(li);

            //========= RENDER CHILDREN RECURSIVELY =====
            let childID = relationships[node.id].child;
            if(childID) {
                let ol = document.createElement('ol');
                li.appendChild(ol);
                render(ol, nodes[childID]);
            }

            //========= RENDER SIBLINGS RECURSIVELY =====
            let siblingID = relationships[node.id].sibling;
            if(siblingID) {
                render(root, nodes[siblingID]);
            }
        }

        function addSibling(targetNode, siblingNode) {

        }

        window.onload = function() {
            console.log('dis called');
            let body = document.getElementsByTagName('body')[0];
            body.appendChild(rootList);
            render(rootList, nodes['0']);
        };

    </script>
</head>

<body>

    <!-- <ol>
        <li>
   -+-+         Rotation

            <ol>
                <li>
                    Music
                    <ol>
                        <li> Offended</li>
                        <li> Krystal</li>
                    </ol>
                </li>
                <li>
                    Code
                    <ol>
                        <li> Check
                            <ol>
                                <li> Set up the data
                                    <ol>
                                        <li> [X] Scaffold in markdown</li>
                                        <li> [] Mock this in JSON</li>
                                    </ol>
                                </li>
                                <li> Structure the page
                                    <ol>
                                        <li> [] Scaffold out html</li>
                                        <li> Implement the logic</li>
                                    </ol>
                                </li>
                                <li> [] Recording/Editing process</li>
                            </ol>
                        </li>
                        <li> Personal Site</li>
                    </ol>
                </li>
                <li>
                    Activities
                    <ol>
                        <li> Go to cafe</li>
                        <li> Go for a walk</li>
                    </ol>
                </li>
        </li>
        <li>
            Admin
            <ol>
                <li> Contact local ISKF chapter to meet and see if I can train/instruct</li>
                <li> Set up a free trial at one competitive </li>
            </ol>
        </li>
    </ol> -->

</body>

</html>